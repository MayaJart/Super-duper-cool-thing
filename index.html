<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Loading...</title>

<style>
  body {
    margin: 0;
    background: #111;
    color: white;
    font-family: Arial, sans-serif;
  }

  .container {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 420px;
    text-align: center;
  }

  .bar {
    width: 100%;
    height: 24px;
    background: #222;
    border: 2px solid #aaa;
    margin-top: 20px;
  }

  .fill {
    height: 100%;
    width: 1px;
    background: #00ccff;
  }

  .text {
    margin-top: 14px;
    font-size: 14px;
  }

  /* Flicker image */
  #flicker {
    position: fixed;
    inset: 0;
    background: black;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 999;
  }

  #flicker img {
    max-width: 60%;
    max-height: 60%;
  }
</style>
</head>

<body>

<div class="container">
  <h2>Loading Super Duper Cool Thing</h2>

  <div class="bar">
    <div class="fill" id="fill"></div>
  </div>

  <div class="text" id="text">Starting…</div>
</div>

<div id="flicker">
  <img src="yellow_jacket.png" alt="">
</div>

<script>
  const fill = document.getElementById("fill");
  const text = document.getElementById("text");
  const flicker = document.getElementById("flicker");

  let percent = 0;

  const messages = [
    "Starting…",
    "Loading files…",
    "Preparing content…",
    "Finalizing…"
  ];

  // Random freeze time (1.5–5s)
  const freezeTime = Math.floor(Math.random() * 3500) + 1500;

  const timer = setInterval(() => {
    if (percent < 99) {
      percent += Math.random() * 2 + 0.5;
      if (percent > 99) percent = 99;

      fill.style.width = percent + "%";
      text.textContent = messages[Math.floor(percent / 25)] || "Loading…";
    } else {
      clearInterval(timer);

      fill.style.width = "99%";
      text.textContent = "Almost done…";

      setTimeout(startFlicker, freezeTime);
    }
  }, 80);

  function startFlicker() {
    let flashes = Math.floor(Math.random() * 3) + 2; // 2–4 flickers
    let count = 0;

    const flickerInterval = setInterval(() => {
      flicker.style.display =
        flicker.style.display === "flex" ? "none" : "flex";

      count++;

      if (count >= flashes * 2) {
        clearInterval(flickerInterval);
        flicker.style.display = "none";

        setTimeout(() => {
          window.location.href =
            "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
        }, 200);
      }
    }, Math.random() * 120 + 80);
  }
</script>

</body>
</html>
